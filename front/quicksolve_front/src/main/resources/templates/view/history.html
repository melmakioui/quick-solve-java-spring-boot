<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.11.3/css/dataTables.bootstrap5.min.css">
    <link rel="icon" type="text/x-icon" th:href="@{/img/favicon.ico}">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"/>
    <title> Historial </title>
</head>
<body>
<th:block th:include="view/fragments/sub-incidence-nav"></th:block>

<main class="d-flex flex-nowrap flex-column justify-content-center mx-6">
    <h1 class="mt-4" th:text="${session.language.getKeyValue().get('historial.titulo')}">Historial</h1>

    <div class="row justify-content-center mt-4">
        <div class="col-12">
            <table id="history" class="w-100 table table-striped">
                <thead class="bg-dark text-texto-contraste">
                <tr>
                    <th>#</th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.titulo')}"></th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.descripcion')}"></th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.departamento')}"></th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.espacio')}"></th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.estado')}"></th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.tecnico')}"></th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.modificacion')}"></th>
                    <th th:text="${session.language.getKeyValue().get('historial.tabla.finalizacion')}"></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="history : ${incidenceHistory}">
                    <td th:text="${history.id}"></td>
                    <td  th:text="${history.title}"></td>
                    <td  th:text="${history.description}"></td>
                    <td th:text="${history.departmentName}"></td>
                    <td th:text="${history.spaceName}"></td>
                    <td th:text="${history.stateName}"></td>
                    <td th:text="${history.techName}"></td>
                    <td th:text="${#temporals.format(history.changeDate,'dd-MM-yyyy HH:mm ')}"></td>
                    <td th:if="${history.dateEnd != null}" th:text="${#temporals.format(history.dateEnd,'dd-MM-yyyy HH:mm')}"></td>
                    <td th:unless="${history.dateEnd != null}" th:text="'N/A'"></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</main>


</body>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
        integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
        integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
        crossorigin="anonymous"></script>
<script th:src="@{/js/jquery-3.6.3-min.js}"></script>


<script src="https://cdn.datatables.net/1.11.3/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/1.11.3/js/dataTables.bootstrap5.min.js"></script>
<script src="https://cdn.datatables.net/colreorder/1.5.4/js/dataTables.colReorder.min.js"></script>

<script>
    $(document).ready(function () {
        $('#history').DataTable({
            responsive: true,
            background: true,
            language: {
                "lengthMenu": "Mostrar _MENU_ registros por página",
                "zeroRecords": "No se encontraron resultados",
                "info": "Mostrando página _PAGE_ de _PAGES_",
                "infoEmpty": "No hay registros disponibles",
                "infoFiltered": "(filtrado de _MAX_ registros totales)",
                "search": "Buscar:",
                "paginate": {
                    "first": "Primero",
                    "last": "Último",
                    "next": "Siguiente",
                    "previous": "Anterior"
                },
            },
            colReorder: true,
        });
    });
</script>

</html>