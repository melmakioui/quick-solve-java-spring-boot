<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Simple Sidebar - Start Bootstrap Template</title>
    <link rel="stylesheet" type="text/css" th:href="@{css/style.css}">
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0"/>
</head>

<body>

<style>
    .material-symbols-outlined {
        font-size: 1.6rem;
        cursor: pointer;
        transition: 0.2s;
    }

    .material-symbols-outlined:hover {
        font-size: 1.6rem;
        transform: scale(1.2);
    }

    .card {
        transition: 0.2s;
    }

    .card:hover { /*Deshabilitar hover al estar en menos de 900px*/
        box-shadow: 0 0 10px 0 rgba(0, 0, 0, 0.2);
        transform: scale(1.02);
    }
</style>

<th:block th:include="view/fragments/nav"></th:block>


<main class="d-flex flex-nowrap" style="transition: 0.5s;">

    <th:block th:include="view/fragments/sidebar"></th:block>

    <div id="page-content-wrapper" class="m-4  mx-4 mt-4 mb-0">

        <div class="container-fluid">
            <button id="sidebarToggle">Toggle Sidebar</button>

            <h1 class="mt-4">Mis Incidencias</h1>

            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Perspiciatis ratione ea et. Repudiandae facere
                praesentium labore. Autem veniam soluta fugit consequuntur mollitia totam non, quis deserunt incidunt
                magni,
                provident similique.</p>

            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ipsum doloremque quia eaque ut nam labore
                necessitatibus aliquam corporis ipsa nulla, est voluptatem quasi enim ipsam deleniti in saepe accusamus
                natus?
                Lorem, ipsum dolor sit amet consectetur adipisicing elit. Vel consequuntur ab laborum commodi cum
                recusandae
                aliquid et doloribus? Exercitationem, eveniet non facilis expedita similique dolorem quia ipsum quo hic
                sit!
            </p>

            <div class="accordion" id="accordion">
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseOne"
                                aria-expanded="true" aria-controls="collapseOne">
                            En Espera
                        </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                         data-bs-parent="#accordion">

                        <div class="accordion-body d-flex flex-wrap">

                            <div class="d-flex justify-content-start" th:each="incidence : ${incidences}">

                                <!-- <div th:if="${incidence.incidenceStateId == 1}" class="card mb-3 m-3"
                                      style="max-width: 18rem;">
                                     <div class="card-header">
                                         <p th:text="${incidence?.department?.name} ?: 'N/A'"></p></div>
                                     <div class="card-body ">
                                         <h5 class="card-title" th:text="${incidence.title}"></h5>
                                         <p class="card-text text-truncate" th:text="${incidence.description}"></p>
                                         <h3 th:text="${incidence?.space?.name} ?: 'N/A'">Espacio: </h3>
                                     </div>
                                     <div class="d-flex justify-content-end">
                                         <a class="p-2 text-primary"
                                            th:href="@{/incidencia/modificar/} + ${incidence.id}"><i
                                                 class="bi bi-pencil"></i></a>
                                         <a class="p-2 text-secondary"
                                            th:href="@{/incidencia/eliminar/} + ${incidence.id}"><i
                                                 class="bi bi-trash"></i></a>
                                         &lt;!&ndash;Abrir un modal al querer eliminar preguntando si esta seguro?&ndash;&gt;
                                         <a class="p-2 text-dark" th:href="@{/incidencia/} + ${incidence.id}"><i
                                                 class="bi bi-eye"></i></a>
                                         &lt;!&ndash;Abrir un modal al querer eliminar preguntando si esta seguro?&ndash;&gt;
                                     </div>
                                 </div>-->


                                <a th:href="@{/incidencia/} + ${incidence.id}"
                                   class="card-link text-decoration-none text-dark">

                                    <div th:if="${incidence.incidenceStateId == 1}" class="card mb-4 mx-2"
                                         style="width: 18rem;">
                                        <div class="card-body">
                                            <h5 class="card-title" th:text="${incidence.title}"></h5>
                                            <p class="card-text text-truncate mb-1"
                                               th:text="${incidence.description}"></p>
                                            <div class="d-flex justify-content-between">
                                                <small>Hace 4 d√≠as</small>
                                                <div>
                                                    <a th:href="@{/incidencia/modificar/} + ${incidence.id}"
                                                       class="icons-crud mx-1 text-primary"><span class="material-symbols-outlined">edit</span></a>
                                                    <a th:href="@{/incidencia/eliminar/} + ${incidence.id}"
                                                       class="icons-crud text-danger mx-1 text-delete"><span
                                                            class="material-symbols-outlined">delete_forever</span></a>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </a>

                            </div>


                            <a href="" class="card-link text-decoration-none text-dark">

                                <div class="card mx-2 bg-dark" style="width: 18rem;">
                                    <div class="card-body d-flex justify-content-center">
                                        <svg width="90px" height="90px" viewBox="-1.2 -1.2 26.40 26.40" fill="none"
                                             xmlns="http://www.w3.org/2000/svg" stroke="#ff9900">
                                            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                                            <g id="SVGRepo_tracerCarrier" stroke-linecap="round"
                                               stroke-linejoin="round"></g>
                                            <g id="SVGRepo_iconCarrier">
                                                <path d="M13 3H7C5.89543 3 5 3.89543 5 5V19C5 20.1046 5.89543 21 7 21H17C18.1046 21 19 20.1046 19 19V9M13 3L19 9M13 3V8C13 8.55228 13.4477 9 14 9H19M12 13V17M14 15H10"
                                                      stroke="#ff990" stroke-width="2" stroke-linecap="round"
                                                      stroke-linejoin="round"></path>
                                            </g>
                                        </svg>
                                    </div>
                                </div>
                            </a>

                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingTwo">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                            Solucionando
                        </button>
                    </h2>
                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo"
                         data-bs-parent="#accordion">
                        <div class="accordion-body d-flex flex-wrap">

                            <div class="d-flex" th:each="incidence : ${incidences}">
                                <div th:if="${incidence.incidenceStateId == 2}" class="card border-primary mb-3 m-3"
                                     style="max-width: 18rem;">
                                    <div class="card-header">
                                        <p th:text="${incidence?.department?.name} ?: 'N/A'"></p></div>
                                    <div class="card-body ">
                                        <h5 class="card-title" th:text="${incidence.title}"></h5>
                                        <p class="card-text text-truncate" th:text="${incidence.description}"></p>
                                        <h3 th:text="${incidence?.space?.name} ?: 'N/A'">Espacio: </h3>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingThree">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                            Solucionado
                        </button>
                    </h2>
                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree"
                         data-bs-parent="#accordion">
                        <div class="accordion-body">

                            <div class="d-flex" th:each="incidence : ${incidences}">
                                <div th:if="${incidence.incidenceStateId == 3 }" class="card  mb-3 m-3"
                                     style="max-width: 18rem;">
                                    <div class="card-header" th:text="${incidence.incidenceState.name}"></div>
                                    <div class="card-body">
                                        <h5 class="card-title" th:text="${incidence.title}">Primary card title</h5>
                                        <p class="card-text text-truncate" th:text="${incidence.description}">Some quick
                                            example text to build on the card title and make up
                                            the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFour">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseThree">
                            Cancelado
                        </button>
                    </h2>
                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour"
                         data-bs-parent="#accordion">
                        <div class="accordion-body">
                            <div class="d-flex" th:each="incidence : ${incidences}">
                                <div th:if="${incidence.incidenceStateId == 4}" class="card  mb-3 m-3"
                                     style="max-width: 18rem;">
                                    <div class="card-header" th:text="${incidence.incidenceState.name}"></div>
                                    <div class="card-body ">
                                        <h5 class="card-title" th:text="${incidence.title}">Primary card title</h5>
                                        <p class="card-text text-truncate" th:text="${incidence.description}">Some quick
                                            example text to build on the card title and make up
                                            the bulk of the card's content.</p>
                                    </div>
                                </div>
                            </div>

                            <h1>No disponibles</h1>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    </div>
</main>


<!-- Page content wrapper-->

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.3.slim.min.js"
        integrity="sha256-ZwqZIVdD3iXNyGHbSYdsmWP//UBokj2FHAxKuSBKDSo=" crossorigin="anonymous"></script>

<script>

    var sidbarToggleBtn = $('#sidebarToggle');
    var main = $('main');
    var smallWith = 768;

    sidbarToggleBtn.on('click', function () {
        main.toggleClass('sidebar-hide');
    });

    $(window).on('resize', function () {
        if ($(window).width() < smallWith) main.addClass('sidebar-hide');
        else main.removeClass('sidebar-hide');
    });

</script>
</body>

</html>
